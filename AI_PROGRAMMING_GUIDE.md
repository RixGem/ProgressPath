# AI编程必看指南 (MUST READ)
> ⚠️ **重要提示**：所有AI辅助开发者必须在修改此项目前阅读本指南！

## 目录
- [AI编程最佳实践](#ai编程最佳实践)
- [环境变量处理原则](#环境变量处理原则)  
- [项目特定指南](#项目特定指南)
- [与用户协作原则](#与用户协作原则)
- [确认已读](#确认已读)
- [集成到开发流程](#集成到开发流程)

## AI编程最佳实践

### 代码质量和一致性标准
- **保持代码简洁明了**：避免过度复杂的实现，优先选择可读性高的方案
- **遵循现有代码风格**：与项目中的命名规范、缩进和格式保持一致
- **变量和函数命名**：使用描述性的名称，避免缩写和模糊的标识符
- **代码复用**：检查是否存在可复用的函数或组件，避免重复代码

### 错误处理和边缘情况考虑
- **全面的错误处理**：为所有可能失败的操作添加try-catch块
- **输入验证**：验证用户输入和API响应的合法性
- **边缘情况**：考虑空值、空数组、网络超时等特殊情况
- **优雅降级**：在功能不可用时提供合理的fallback机制

### 文档和注释规范
- **关键逻辑注释**：为复杂的业务逻辑添加清晰的中文注释
- **函数文档**：使用JSDoc格式为公共函数添加参数和返回值说明
- **TODO标记**：明确标注待完成的功能和已知问题
- **变更记录**：在修改现有代码时，简要说明修改原因

## 环境变量处理原则

### 不修改已与用户约定的环境变量名称
- **保持向后兼容**：绝不改变用户已经配置的环境变量名
- **谨慎重构**：即使变量名不符合最新规范，也要保持现有约定
- **文档同步**：确保环境变量文档与实际使用保持一致

### 使用兼容性方案处理多种命名约定
```javascript
// 示例：支持多种环境变量命名
const dbUrl = process.env.DATABASE_URL || 
              process.env.DB_URL || 
              process.env.MONGO_URI ||
              'mongodb://localhost:27017/progresspath';
```

### 环境变量检查和合理的默认值设置
- **必需变量检查**：在应用启动时验证关键环境变量
- **合理默认值**：为开发环境提供可用的默认配置
- **敏感信息提醒**：在文档中明确说明哪些变量包含敏感信息

## 项目特定指南

### ProgressPath的代码风格和架构
- **模块化设计**：将功能拆分为独立的模块和组件
- **RESTful API**：遵循REST设计原则，使用合适的HTTP方法
- **数据库操作**：使用统一的数据访问层，避免直接在路由中写SQL
- **前端组件**：保持组件的单一职责原则，便于测试和维护

### 常见陷阱和如何避免
- **异步操作**：正确使用async/await，避免Promise地狱
- **内存泄漏**：及时清理事件监听器和定时器
- **安全漏洞**：对用户输入进行适当的校验和转义
- **性能问题**：避免在循环中进行数据库查询

### 测试和调试建议
- **单元测试**：为核心业务逻辑编写单元测试
- **集成测试**：测试API端点的完整流程
- **错误日志**：使用结构化日志记录错误信息
- **调试工具**：善用浏览器开发者工具和Node.js调试器

## 与用户协作原则

### 在生成重大更改前先确认
- **影响评估**：说明更改可能影响的功能和文件
- **备份提醒**：建议用户备份重要数据和配置
- **分步实施**：将大型更改拆分为小步骤，逐步确认

### 提供多种方案让用户选择
- **方案对比**：列出不同实现方案的优缺点
- **性能影响**：说明各方案对系统性能的影响
- **维护成本**：评估长期维护的复杂度

### 清晰解释技术决策和影响
- **决策理由**：说明选择特定技术方案的原因
- **权衡考量**：解释在性能、安全性、可维护性间的平衡
- **未来扩展**：考虑方案的可扩展性和升级路径

## 确认已读

开发者在提交PR前，应确认已阅读并遵守本指南。AI开发者应在PR描述中包含以下声明：
- ✅ 我已阅读并遵守AI编程指南
- ✅ 我未修改用户已约定的环境变量名称
- ✅ 我的代码符合项目的最佳实践和架构模式

## 集成到开发流程

### 开发前准备
- 每次修改项目代码前，请先阅读此指南
- 熟悉项目的现有架构和代码风格
- 检查相关的issue和讨论，了解背景信息

### 代码审核要求
- PR审核者应检查PR是否遵循了指南要求
- 验证环境变量使用是否符合兼容性原则
- 确认代码质量符合项目标准

### 文档维护
- 将此指南链接添加到项目的CONTRIBUTING.md文件中
- 在README.md中提及AI编程指南的存在
- 定期更新指南内容，反映项目的最新实践

---

## 结语

本指南旨在确保AI辅助开发能够：
- 产生高质量、可维护的代码
- 保持与现有系统的兼容性
- 提供良好的用户体验
- 降低项目的长期维护成本

遵循这些原则将帮助我们构建更好的ProgressPath应用。